<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  
    <!-- ★ 追加：base（GitHub Pages のリポジトリ名） -->
  <base href="/hiro-san-z-reco/">
 <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>山行記録 - 山域別 | hiro-sanの山歩き</title>
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="icon" href="favicon.ico">
</head>
<body>
  <!-- ▼ 共通ヘッダー読み込み位置 ▼ -->
  <div id="header"></div> 
  
  <div class="container">
    <nav class="breadcrumb">
      <ul>
        <li><a href="index.html">ホーム</a></li>
        <li><a href="records.html">山行記録</a></li>
        <li>山域別</li>
      </ul>
    </nav>
    <h1>山行記録 - 山域別</h1>
    <p>山域ごとに分類された山行記録です。ラベルをクリックすると対応する記事一覧が表示されます。</p>

    <div style="display:flex; gap:20px;">
      <!-- ラベルボタン -->
      <div class="label-buttons">
        <a href="/records/area.html?label=北アルプス">北アルプス</a>
        <a href="/records/area.html?label=南アルプス">南アルプス</a>
        <a href="/records/area.html?label=中央アルプス">中央アルプス</a>
        <a href="/records/area.html?label=大峰">大峰</a>
        <a href="/records/area.html?label=その他山域">その他</a>
      </div>

      <!-- 記事リスト -->
      <div class="list-box" id="latest-list">
        <h3 id="list-title">最新5件</h3>
        <ul></ul>
        <p><a id="more-link" href="#" target="_blank">▶ もっと見る</a></p>
      </div>
    </div>
  </div>

  <!-- Bloggerのラベル別フィードを取得 -->
  <script>
    const params = new URLSearchParams(window.location.search);
    const labelName = params.get("label") || "北アルプス";

    document.getElementById("list-title").textContent = labelName + " の最新5件";

    const feedUrl = "https://hiro-san-163.blogspot.com/feeds/posts/default/-/" 
                  + encodeURIComponent(labelName) 
                  + "?alt=json&max-results=5";

    const moreUrl = "https://hiro-san-163.blogspot.com/search/label/" + encodeURIComponent(labelName);
    document.getElementById("more-link").href = moreUrl;

    fetch(feedUrl)
      .then(r => r.json())
      .then(data => {
        let posts = data.feed.entry || [];
        let html = "";
        posts.forEach(post => {
          let title = post.title.$t;
          let link = post.link.find(l => l.rel === "alternate").href;
          let date = new Date(post.published.$t).toLocaleDateString();
          html += `<li><small>${date}</small> <a href="${link}" target="_blank">${title}</a></li>`;
        });
        document.querySelector("#latest-list ul").innerHTML = html;
      })
      .catch(() => {
        document.querySelector("#latest-list ul").innerHTML = "<li>記事が見つかりません</li>";
      });
  </script>

  
  <!-- ▼ 共通フッター／JS 読み込み ▼ -->
  <div id="footer"></div>
  <script src="JS/include.js"></script>
</body>
</html>

